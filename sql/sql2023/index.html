<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MySQL WIKI"><meta name=author content=fengzhao><link href=https://mysql.fengzhao.me/sql/sql2023/ rel=canonical><link href=../../basic/18.MySQL%E4%B8%B4%E6%97%B6%E8%A1%A8/ rel=prev><link href=../../foundmental/2.MySQL%E7%B4%A2%E5%BC%95/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.17"><title>1.SQL2023新特性 - MySQL WIKI</title><link rel=stylesheet href=../../assets/stylesheets/main.bcfcd587.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../.. title="MySQL WIKI" class="md-header__button md-logo" aria-label="MySQL WIKI" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MySQL WIKI </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 1.SQL2023新特性 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fengzhao/mysql-wiki title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fengzhao/mysql-wiki </div> </a> </div> </nav> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../resources/ class=md-tabs__link> 学习资源 </a> </li> <li class=md-tabs__item> <a href=../../basic/0.mysql_source/ class=md-tabs__link> MySQL入门 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> SQL特性 </a> </li> <li class=md-tabs__item> <a href=../../foundmental/2.MySQL%E7%B4%A2%E5%BC%95/ class=md-tabs__link> MySQL基础 </a> </li> <li class=md-tabs__item> <a href=../../advanced/1.MySQL%E6%9E%B6%E6%9E%84%E5%88%B0InnoDB%E6%9E%B6%E6%9E%84/ class=md-tabs__link> MySQL高级 </a> </li> <li class=md-tabs__item> <a href=../../optimize/1.overview/ class=md-tabs__link> MySQL调优 </a> </li> <li class=md-tabs__item> <a href=../../postgresql/01.postgresql%E7%AE%80%E4%BB%8B/ class=md-tabs__link> PostgreSQL </a> </li> <li class=md-tabs__item> <a href=../../mongodb/01.%E7%AE%80%E4%BB%8B/ class=md-tabs__link> MongoDB </a> </li> <li class=md-tabs__item> <a href=../../redis/01.redis%E7%AE%80%E4%BB%8B/ class=md-tabs__link> Redis </a> </li> <li class=md-tabs__item> <a href=../../%E7%AE%97%E6%B3%95/01.%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0/ class=md-tabs__link> 算法 </a> </li> <li class=md-tabs__item> <a href=../../oracle/01.Oracle%E6%A6%82%E8%BF%B0/ class=md-tabs__link> Oracle </a> </li> <li class=md-tabs__item> <a href=../../network/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/ class=md-tabs__link> network </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="MySQL WIKI" class="md-nav__button md-logo" aria-label="MySQL WIKI" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> MySQL WIKI </label> <div class=md-nav__source> <a href=https://github.com/fengzhao/mysql-wiki title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> fengzhao/mysql-wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../resources/ class=md-nav__link> <span class=md-ellipsis> 学习资源 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> MySQL入门 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> MySQL入门 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../basic/0.mysql_source/ class=md-nav__link> <span class=md-ellipsis> 0. MySQL的起源和分支 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/1.introduce_database/ class=md-nav__link> <span class=md-ellipsis> 1. 数据库概述 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/2.install_mysql/ class=md-nav__link> <span class=md-ellipsis> 2. 安装 MySQL </span> </a> </li> <li class=md-nav__item> <a href=../../basic/3.mysql_execute_command/ class=md-nav__link> <span class=md-ellipsis> 3. MySQL可执行程序 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/4.sql/ class=md-nav__link> <span class=md-ellipsis> 4. SQL语句和语法 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/5.relation/ class=md-nav__link> <span class=md-ellipsis> 5. 关系模型和关系代数 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/6.sql_practice/ class=md-nav__link> <span class=md-ellipsis> 6. SQL题目练习 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/7.MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> 7. MySQL数据类型 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/8.MySQL%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99/ class=md-nav__link> <span class=md-ellipsis> 8. MySQL字符集和排序规则 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/9.mysql_architecture/ class=md-nav__link> <span class=md-ellipsis> 9. MySQL逻辑架构 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/10.MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/ class=md-nav__link> <span class=md-ellipsis> 10. MySQL存储引擎 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/11.sql-Transaction/ class=md-nav__link> <span class=md-ellipsis> 11. MySQL事务和锁 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/12.MySQL%E5%86%85%E5%AD%98%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 12. MySQL内存概述 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/13.MySQL%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%93%E5%BC%80%E5%92%8C%E5%85%B3%E9%97%AD%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 13. MySQL是如何打开和关闭表 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/14.MySQL%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8/ class=md-nav__link> <span class=md-ellipsis> 14. MySQL数据字典 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/15.%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/ class=md-nav__link> <span class=md-ellipsis> 15. MySQL数据文件格式 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/16.MySQL%E5%88%86%E5%8C%BA%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 16. MySQL分区表 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/17.MySQL%E5%BF%AB%E9%80%9F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/ class=md-nav__link> <span class=md-ellipsis> 17. MySQL快速导入数据 </span> </a> </li> <li class=md-nav__item> <a href=../../basic/18.MySQL%E4%B8%B4%E6%97%B6%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 18. MySQL临时表 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> SQL特性 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> SQL特性 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 1.SQL2023新特性 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 1.SQL2023新特性 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#sql class=md-nav__link> <span class=md-ellipsis> SQL 增强 </span> </a> <nav class=md-nav aria-label="SQL 增强"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unique-f292 class=md-nav__link> <span class=md-ellipsis> UNIQUE 约束中的空值（F292） </span> </a> </li> <li class=md-nav__item> <a href=#order-byf868 class=md-nav__link> <span class=md-ellipsis> 分组表中的 ORDER BY（F868） </span> </a> </li> <li class=md-nav__item> <a href=#greatest-least-t054 class=md-nav__link> <span class=md-ellipsis> GREATEST 和 LEAST 函数（T054） </span> </a> </li> <li class=md-nav__item> <a href=#t055 class=md-nav__link> <span class=md-ellipsis> 字符串填充函数（T055） </span> </a> </li> <li class=md-nav__item> <a href=#trim-t056 class=md-nav__link> <span class=md-ellipsis> 多字符 TRIM 函数（T056） </span> </a> </li> <li class=md-nav__item> <a href=#t081 class=md-nav__link> <span class=md-ellipsis> 可选的字符串类型最大长度（T081） </span> </a> </li> <li class=md-nav__item> <a href=#t133 class=md-nav__link> <span class=md-ellipsis> 增强的递归循环标识（T133） </span> </a> </li> <li class=md-nav__item> <a href=#any_value-t626 class=md-nav__link> <span class=md-ellipsis> ANY_VALUE 函数（T626） </span> </a> </li> <li class=md-nav__item> <a href=#t661 class=md-nav__link> <span class=md-ellipsis> 非十进制的整数常量（T661） </span> </a> </li> <li class=md-nav__item> <a href=#t662 class=md-nav__link> <span class=md-ellipsis> 数字常量中的下划线（T662） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json class=md-nav__link> <span class=md-ellipsis> JSON 新功能 </span> </a> <nav class=md-nav aria-label="JSON 新功能"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-t801 class=md-nav__link> <span class=md-ellipsis> JSON 数据类型（T801） </span> </a> </li> <li class=md-nav__item> <a href=#json-t802 class=md-nav__link> <span class=md-ellipsis> 增强的 JSON 数据类型（T802） </span> </a> </li> <li class=md-nav__item> <a href=#jsont803 class=md-nav__link> <span class=md-ellipsis> 基于字符串的 JSON（T803） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t840 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 路径中的十六进制整数常量（T840） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t860-t864 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 简化访问符（T860-T864） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t865-t878 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 元素方法（T865-T878） </span> </a> </li> <li class=md-nav__item> <a href=#json-t879-t882 class=md-nav__link> <span class=md-ellipsis> JSON 数据比较功能（T879-T882） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 属性图查询语言 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> MySQL基础 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> MySQL基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../foundmental/2.MySQL%E7%B4%A2%E5%BC%95/ class=md-nav__link> <span class=md-ellipsis> 1.索引相关 </span> </a> </li> <li class=md-nav__item> <a href=../../dev/02.%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/ class=md-nav__link> <span class=md-ellipsis> 2.数据库设计 </span> </a> </li> <li class=md-nav__item> <a href=../../dev/03.%E5%9C%A8%E7%BA%BFDDL/ class=md-nav__link> <span class=md-ellipsis> 3.在线DDL </span> </a> </li> <li class=md-nav__item> <a href=../../dev/04.MySQL%E8%BF%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%AE%97%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 4.联表算法 </span> </a> </li> <li class=md-nav__item> <a href=../../dev/05.MySQL-insert%E8%AF%AD%E6%B3%95/ class=md-nav__link> <span class=md-ellipsis> 5.insert语法 </span> </a> </li> <li class=md-nav__item> <a href=../../dev/06.MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 6.MySQL主从复制 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> MySQL高级 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> MySQL高级 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_1> <label class=md-nav__link for=__nav_6_1 id=__nav_6_1_label tabindex=0> <span class=md-ellipsis> 深入理解innoDB存储引擎 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> 深入理解innoDB存储引擎 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advanced/1.MySQL%E6%9E%B6%E6%9E%84%E5%88%B0InnoDB%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 1.MySQL架构到innoDB架构 </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/2.InnoDB%E2%80%94%E2%80%94%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 2.InnoDB——简介 </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/3.InnoDB%E2%80%94%E2%80%94%E5%85%B3%E9%94%AE%E7%89%B9%E6%80%A7/ class=md-nav__link> <span class=md-ellipsis> 3.InnoDB关键特性 </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/4.InnoDB%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E7%BC%93%E5%86%B2%E6%B1%A0/ class=md-nav__link> <span class=md-ellipsis> 4.InnoDB内存结构——缓冲池 </span> </a> </li> <li class=md-nav__item> <a href=../../advanced/5.MySQL%E6%BA%90%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83/ class=md-nav__link> <span class=md-ellipsis> 5.搭建MySQL源代码调试debug环境 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> OLAP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> OLAP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../olap/01.OLAP%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 1.0.OLAP概述 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> MySQL协议分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> MySQL协议分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../foundmental/1.MySQL%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90%E4%B8%8E%E6%8A%93%E5%8C%85%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 1.协议分析概述 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> MySQL调优 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> MySQL调优 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../optimize/1.overview/ class=md-nav__link> <span class=md-ellipsis> 调优概述 </span> </a> </li> <li class=md-nav__item> <a href=../../optimize/many_tables/ class=md-nav__link> <span class=md-ellipsis> 数据大小 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> PostgreSQL </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> PostgreSQL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgresql/01.postgresql%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 1. PostgreSQL简介 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/02.postgresql%E5%AE%89%E8%A3%85/ class=md-nav__link> <span class=md-ellipsis> 2. PogreSQL安装 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/03.%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84/ class=md-nav__link> <span class=md-ellipsis> 3. PogreSQL体系架构 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/04.postgresql%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/ class=md-nav__link> <span class=md-ellipsis> 4. PogreSQL访问控制 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/05.%E5%B8%B8%E7%94%A8SQL/ class=md-nav__link> <span class=md-ellipsis> 5. 常用SQL </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/06.%E7%BB%A7%E6%89%BF%E8%A1%A8/ class=md-nav__link> <span class=md-ellipsis> 6. 继承 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/07.%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0/ class=md-nav__link> <span class=md-ellipsis> 7. 用户自定义函数UDF </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/08.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/ class=md-nav__link> <span class=md-ellipsis> 8. 基本数据类型 </span> </a> </li> <li class=md-nav__item> <a href=../../postgresql/09.%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F/ class=md-nav__link> <span class=md-ellipsis> 9. 可执行程序 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> MongoDB </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> MongoDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mongodb/01.%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 0. MongoDB概述 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Redis </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Redis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../redis/01.redis%E7%AE%80%E4%BB%8B/ class=md-nav__link> <span class=md-ellipsis> 0. redis概述 </span> </a> </li> <li class=md-nav__item> <a href=../../redis/02.redis%E5%AE%A2%E6%88%B7%E7%AB%AF/ class=md-nav__link> <span class=md-ellipsis> 2. redis客户端 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> 算法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> 算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../%E7%AE%97%E6%B3%95/01.%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 0. 算法概述 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex=0> <span class=md-ellipsis> Oracle </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Oracle </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../oracle/01.Oracle%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 1.Oracle概述 </span> </a> </li> <li class=md-nav__item> <a href=../../oracle/02.oracle安装.md class=md-nav__link> <span class=md-ellipsis> 2.Oracle安装 </span> </a> </li> <li class=md-nav__item> <a href=../../oracle/03.Oracle体系架构.md class=md-nav__link> <span class=md-ellipsis> 3.Oracle体系架构 </span> </a> </li> <li class=md-nav__item> <a href=../../oracle/04.oracle访问控制.md class=md-nav__link> <span class=md-ellipsis> 4.Oracle访问控制 </span> </a> </li> <li class=md-nav__item> <a href=../../oracle/05.常用SQL.md class=md-nav__link> <span class=md-ellipsis> 5.常用SQL </span> </a> </li> <li class=md-nav__item> <a href=../../oracle/06.%E8%BE%BE%E6%A2%A6%E4%BC%98%E5%8C%96/ class=md-nav__link> <span class=md-ellipsis> 6.达梦优化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13 id=__nav_13_label tabindex=0> <span class=md-ellipsis> network </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> network </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../network/1.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/ class=md-nav__link> <span class=md-ellipsis> 1.计算机网络概述 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#sql class=md-nav__link> <span class=md-ellipsis> SQL 增强 </span> </a> <nav class=md-nav aria-label="SQL 增强"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unique-f292 class=md-nav__link> <span class=md-ellipsis> UNIQUE 约束中的空值（F292） </span> </a> </li> <li class=md-nav__item> <a href=#order-byf868 class=md-nav__link> <span class=md-ellipsis> 分组表中的 ORDER BY（F868） </span> </a> </li> <li class=md-nav__item> <a href=#greatest-least-t054 class=md-nav__link> <span class=md-ellipsis> GREATEST 和 LEAST 函数（T054） </span> </a> </li> <li class=md-nav__item> <a href=#t055 class=md-nav__link> <span class=md-ellipsis> 字符串填充函数（T055） </span> </a> </li> <li class=md-nav__item> <a href=#trim-t056 class=md-nav__link> <span class=md-ellipsis> 多字符 TRIM 函数（T056） </span> </a> </li> <li class=md-nav__item> <a href=#t081 class=md-nav__link> <span class=md-ellipsis> 可选的字符串类型最大长度（T081） </span> </a> </li> <li class=md-nav__item> <a href=#t133 class=md-nav__link> <span class=md-ellipsis> 增强的递归循环标识（T133） </span> </a> </li> <li class=md-nav__item> <a href=#any_value-t626 class=md-nav__link> <span class=md-ellipsis> ANY_VALUE 函数（T626） </span> </a> </li> <li class=md-nav__item> <a href=#t661 class=md-nav__link> <span class=md-ellipsis> 非十进制的整数常量（T661） </span> </a> </li> <li class=md-nav__item> <a href=#t662 class=md-nav__link> <span class=md-ellipsis> 数字常量中的下划线（T662） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#json class=md-nav__link> <span class=md-ellipsis> JSON 新功能 </span> </a> <nav class=md-nav aria-label="JSON 新功能"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-t801 class=md-nav__link> <span class=md-ellipsis> JSON 数据类型（T801） </span> </a> </li> <li class=md-nav__item> <a href=#json-t802 class=md-nav__link> <span class=md-ellipsis> 增强的 JSON 数据类型（T802） </span> </a> </li> <li class=md-nav__item> <a href=#jsont803 class=md-nav__link> <span class=md-ellipsis> 基于字符串的 JSON（T803） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t840 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 路径中的十六进制整数常量（T840） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t860-t864 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 简化访问符（T860-T864） </span> </a> </li> <li class=md-nav__item> <a href=#sqljson-t865-t878 class=md-nav__link> <span class=md-ellipsis> SQL/JSON 元素方法（T865-T878） </span> </a> </li> <li class=md-nav__item> <a href=#json-t879-t882 class=md-nav__link> <span class=md-ellipsis> JSON 数据比较功能（T879-T882） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 属性图查询语言 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=_1>概述<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <p>SQL虽是一门古老的技术，但却并非停滞不前。看下历代SQL标准年表：</p> <blockquote> <p>SQL-86 SQL-89 SQL-92 SQL:1999 SQL:2003 SQL:2006 SQL:2008 SQL:2011 SQL:2016 SQL:2023</p> </blockquote> <p>标准这种东西迭代太快也不行，不然就算程序员们的头发能受了，数据库厂家也受不了，所以目前SQL标准这种稳健的迭代是比较正确的做法。</p> <p>但即使这样，数据库厂家们也没能跟上节奏，至今没有任何一家数据库产品声称完全符合<code>SQL:2016</code>的核心特性。</p> <p><code>SQL</code>标准每隔几年就会发布一次，国际标准化组织（ISO）于2023年6月1日正式发布了最新<code>SQL</code>标准，也就是<code>SQL:2023</code>。Peter Eisentraut在这篇文章有详细的示范说明：</p> <blockquote> <p><a href=https://peter.eisentraut.org/blog/2023/04/04/sql-2023-is-finished-here-is-whats-new>https://peter.eisentraut.org/blog/2023/04/04/sql-2023-is-finished-here-is-whats-new</a></p> </blockquote> <p>文章对<code>SQL:2023</code>标准进行了分析，并归类了三大类别方面的变化：</p> <ul> <li>当前SQL语言的一些小变更</li> <li>JSON相关的功能特性</li> <li>新引入图查询的接口</li> </ul> <p>文章围绕这三方面进行了示例说明，同时作者又紧接着分析了PostgreSQL数据库对SQL:2023标准的支持情况，参考文章如下：</p> <blockquote> <p><a href=https://peter.eisentraut.org/blog/2023/04/18/postgresql-and-sql-2023>https://peter.eisentraut.org/blog/2023/04/18/postgresql-and-sql-2023</a></p> <p>PostgreSQL supports most of the major features of SQL:2023. Out of 177 mandatory features required for full Core conformance, PostgreSQL conforms to at least 170. In addition, there is a long list of supported optional features. It might be worth noting that at the time of writing, no current version of any database management system claims full conformance to Core SQL:2023.</p> </blockquote> <table> <thead> <tr> <th>UNIQUE null treatment (F292)</th> <th><a href=https://www.postgresql.org/docs/15/release-15.html>PostgreSQL 15</a></th> </tr> </thead> <tbody> <tr> <td>ORDER BY in grouped table (F868)</td> <td>ancient</td> </tr> <tr> <td>GREATEST and LEAST (T054)</td> <td>ancient</td> </tr> <tr> <td>String padding functions (T055)</td> <td>ancient</td> </tr> <tr> <td>Multi-character TRIM functions (T056)</td> <td>ancient</td> </tr> <tr> <td>Optional string types maximum length (T081)</td> <td>ancient</td> </tr> <tr> <td>Enhanced cycle mark values (T133)</td> <td><a href=https://www.postgresql.org/docs/14/release-14.html>PostgreSQL 14</a></td> </tr> <tr> <td>ANY_VALUE (T626)</td> <td>PostgreSQL 16</td> </tr> <tr> <td>Non-decimal integer literals (T661)</td> <td>PostgreSQL 16</td> </tr> <tr> <td>Underscores in numeric literals (T662)</td> <td>PostgreSQL 16</td> </tr> <tr> <td>JSON data type (T801)</td> <td>PostgreSQL <a href=https://www.postgresql.org/docs/9.2/release-9-2.html>9.2</a>/<a href=https://www.postgresql.org/docs/9.4/release-9-4.html>9.4</a></td> </tr> <tr> <td>Enhanced JSON data type (T802)</td> <td>future</td> </tr> <tr> <td>String-based JSON (T803)</td> <td>not planned</td> </tr> <tr> <td>Hex integer literals in SQL/JSON path language (T840)</td> <td>PostgreSQL 16</td> </tr> <tr> <td>SQL/JSON simplified accessor (T860–T864)</td> <td>future</td> </tr> <tr> <td>SQL/JSON item methods (T865–T878)</td> <td>future</td> </tr> <tr> <td>JSON comparison (T879–T882)</td> <td><a href=https://www.postgresql.org/docs/9.4/release-9-4.html>PostgreSQL 9.4</a></td> </tr> <tr> <td>Property Graph Queries</td> <td>future</td> </tr> </tbody> </table> <p>Notes:</p> <ul> <li>"ancient" means sometime before PostgreSQL 10. These are features that were already widely available in SQL implementations before they were added to the standard.</li> <li>As of this writing, PostgreSQL 16 is in feature freeze but not released yet. So those entries could in theory change, but it’s pretty unlikely. Conformance information for PostgreSQL 16 relative to SQL:2023 can also be found in the <a href=https://www.postgresql.org/docs/current/features.html>documentation</a>.</li> <li>For the T801 entry, the <code>json</code> type was added in PostgreSQL 9.2 and the <code>jsonb</code> type was added in PostgreSQL 9.4. Most of the JSON functionality in SQL:2016 and SQL:2023 (including features T879 ff.) maps more readily to the <code>jsonb</code> type, so this information should be interpreted that way. Whether and how the <code>json</code> and <code>jsonb</code> types should be consolidated in PostgreSQL is an open question.</li> <li>“not planned” is my opinion that the feature is essentially obsolete (see previous article) and not worth implementing.</li> <li>“future” is my opinion that the feature could be a sensible addition to PostgreSQL, but there is no concrete work in progress.</li> </ul> <h2 id=sql>SQL 增强<a class=headerlink href=#sql title="Permanent link">&para;</a></h2> <h3 id=unique-f292>UNIQUE 约束中的空值（F292）<a class=headerlink href=#unique-f292 title="Permanent link">&para;</a></h3> <p>这个功能用于定义唯一约束中是否允许多个空值。例如：</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>c</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>UNIQUE</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>)</span>
<span class=p>);</span>

<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span><span class=w>  </span><span class=c1>-- ?</span>
</code></pre></div> <p>问题在于第二个插入语句是否会违法唯一约束。</p> <p>显然，已有的标准没有明确的定义。为了解决这个问题，新标准增加了一个选项。例如：</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>c</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>UNIQUE</span><span class=w> </span><span class=n>NULLS</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>)</span><span class=w>    </span><span class=c1>-- NULLS DISTINCT 选项将多个空值看作不同的数据，因此不会违反唯一约束</span>
<span class=p>);</span>

<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t2</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span><span class=w>  </span><span class=c1>-- 正确</span>

<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t3</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>c</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>UNIQUE</span><span class=w> </span><span class=n>NULLS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>)</span><span class=w>  </span><span class=c1>-- NULLS NOT DISTINCT 选项将多个空值看作相同的数据，因此违反了唯一约束。</span>
<span class=p>);</span>

<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t3</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span><span class=w>  </span>
<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t3</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w> </span><span class=k>NULL</span><span class=p>);</span><span class=w>  </span><span class=c1>-- 错误</span>
</code></pre></div> <blockquote> <p>该选项的默认值取决于数据库产品的具体实现，这样可以兼容已有的行为。</p> </blockquote> <h3 id=order-byf868>分组表中的 ORDER BY（F868）<a class=headerlink href=#order-byf868 title="Permanent link">&para;</a></h3> <p>我们来看一个示例：</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>product_id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span>
<span class=w>    </span><span class=n>product_name</span><span class=w> </span><span class=nb>varchar</span><span class=p>,</span>
<span class=w>    </span><span class=n>product_code</span><span class=w> </span><span class=nb>varchar</span><span class=w> </span><span class=k>UNIQUE</span>
<span class=p>);</span>

<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>product_part</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>product_id</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>part_id</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>num</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span><span class=w> </span><span class=n>part_id</span><span class=p>)</span>
<span class=p>);</span>

<span class=k>SELECT</span><span class=w> </span><span class=n>product</span><span class=p>.</span><span class=n>product_id</span><span class=p>,</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=n>product_part</span><span class=p>.</span><span class=n>num</span><span class=p>)</span>
<span class=k>FROM</span><span class=w> </span><span class=n>product</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>product_part</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>product</span><span class=p>.</span><span class=n>product_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>product_part</span><span class=p>.</span><span class=n>product_id</span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>product</span><span class=p>.</span><span class=n>product_id</span>
<span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>product</span><span class=p>.</span><span class=n>product_code</span><span class=p>;</span>
</code></pre></div> <p>以上示例在大多数 SQL 实现中都能正常工作，但是标准却不允许这种查询方式。也就是说，<code>SQL标准</code>不允许使用没有出现在<code>SELECT</code>列表中的分组表字段（product.product_code）进行排序。新标准则允<code>SQL</code>实现明确支持这种行为。</p> <blockquote> <p>作为用户，我们并不需要关心这个问题。</p> </blockquote> <h3 id=greatest-least-t054>GREATEST 和 LEAST 函数（T054）<a class=headerlink href=#greatest-least-t054 title="Permanent link">&para;</a></h3> <p>这个功能增加了两个新的标量函数：<code>GREATEST</code>（最大值）以及 <code>LEAST</code>（最小值）。它们不是聚合函数 <code>MAX</code> 和<code>MIN</code>，而是返回一组参数中的最大值和最小值。实际上很多数据库已经实现了这两个函数：</p> <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=n>greatest</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span><span class=w>  </span><span class=c1>--&gt; 2</span>
<span class=k>SELECT</span><span class=w> </span><span class=n>least</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>);</span><span class=w>     </span><span class=c1>--&gt; 1</span>

<span class=k>SELECT</span><span class=w> </span><span class=n>greatest</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>  </span><span class=c1>--&gt; 3</span>
<span class=k>SELECT</span><span class=w> </span><span class=n>least</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span><span class=w>     </span><span class=c1>--&gt; 1</span>
</code></pre></div> <h3 id=t055>字符串填充函数（T055）<a class=headerlink href=#t055 title="Permanent link">&para;</a></h3> <p>这个功能增加了两个新的字符串函数：<code>LPAD</code>（左侧填充）以及 <code>RPAD</code>（右侧填充）。这两个函数同样在很多数据库中已经有了实现：</p> <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=n>lpad</span><span class=p>(</span><span class=k>cast</span><span class=p>(</span><span class=mi>12345</span><span class=p>.</span><span class=mi>67</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>varchar</span><span class=p>),</span><span class=w> </span><span class=mi>12</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;*&#39;</span><span class=p>);</span>

<span class=c1>-- ****12345.67</span>
</code></pre></div> <blockquote> <p>默认使用的填充字符为空格。</p> </blockquote> <h3 id=trim-t056>多字符 TRIM 函数（T056）<a class=headerlink href=#trim-t056 title="Permanent link">&para;</a></h3> <p>已有的单字符截断函数<code>（TRIM({LEADING|TRAILING|BOTH} 'x' FROM val)）</code>只能指定要截断的单个字符，新函数则可以指定多个需要截断的字符，而且语法更加简洁。例如： <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=n>ltrim</span><span class=p>(</span><span class=s1>&#39;****12345.67&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;*&#39;</span><span class=p>);</span>
</code></pre></div></p> <h3 id=t081>可选的字符串类型最大长度（T081）<a class=headerlink href=#t081 title="Permanent link">&para;</a></h3> <p>这个功能允许不指定 <code>VARCHAR</code> 类型的最大长度。在此之前，我们经常会看到为了支持任意长度而指定一个很大的长度值： <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>1000</span><span class=p>),</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>4000</span><span class=p>),</span>
<span class=w>    </span><span class=c1>-- ...</span>
<span class=p>);</span>
</code></pre></div></p> <p>现在可以简单的指定数据类型：</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>,</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>,</span>
<span class=w>    </span><span class=c1>-- ...</span>
<span class=p>);</span>
</code></pre></div> <p>这种情况下，字段的最大长度取决于数据库实现。</p> <h3 id=t133>增强的递归循环标识（T133）<a class=headerlink href=#t133 title="Permanent link">&para;</a></h3> <p><code>CYCLE</code> 子句是鲜为人知的一个递归查询功能，可以用于检测循环递归：</p> <div class=highlight><pre><span></span><code><span class=k>WITH</span><span class=w> </span><span class=k>RECURSIVE</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span>
<span class=w>      </span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span>
<span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span>
<span class=p>)</span>
<span class=k>CYCLE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>is_cycle</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;Y&#39;</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;N&#39;</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>path</span><span class=p>;</span>
</code></pre></div> <p>这种方式可以基于 id 字段检测是否出现循环递归，并且将 is_cycle 字段设置为指定值。</p> <p>当 <code>SQL</code> 标准增加递归循环时，还没有布尔类型，因此使用了一个字符串。如今 <code>SQL</code> 标准提供了布尔类型，因此上面的查询可以改进为：</p> <div class=highlight><pre><span></span><code><span class=k>WITH</span><span class=w> </span><span class=k>RECURSIVE</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span>
<span class=w>      </span><span class=k>UNION</span><span class=w> </span><span class=k>ALL</span>
<span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=p>...</span>
<span class=p>)</span>
<span class=k>CYCLE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>is_cycle</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>path</span><span class=p>;</span>
</code></pre></div> <h3 id=any_value-t626>ANY_VALUE 函数（T626）<a class=headerlink href=#any_value-t626 title="Permanent link">&para;</a></h3> <p>这个新的聚合函数可以从一组数据中返回任意一个非空值。例如： <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=p>(</span>
<span class=w>    </span><span class=n>a</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
<span class=w>    </span><span class=n>b</span><span class=w> </span><span class=nb>int</span>
<span class=p>);</span>

<span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>22</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>33</span><span class=p>);</span>

<span class=k>SELECT</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>any_value</span><span class=p>(</span><span class=n>b</span><span class=p>)</span><span class=w> </span>
<span class=k>FROM</span><span class=w> </span><span class=n>t1</span><span class=w> </span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>a</span><span class=p>;</span>
</code></pre></div></p> <p>以上查询可能会返回（1 | 11）、（1 | 22）或者（1 | 33）。</p> <h3 id=t661>非十进制的整数常量（T661）<a class=headerlink href=#t661 title="Permanent link">&para;</a></h3> <p>这个新功能支持十六进制、八进制以及二进制的整数常量。 <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=mi>0</span><span class=n>xFFFF</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=n>o755</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=n>b11001111</span><span class=p>;</span>
</code></pre></div></p> <h3 id=t662>数字常量中的下划线（T662）<a class=headerlink href=#t662 title="Permanent link">&para;</a></h3> <p>这个功能允许在数字常量中使用下划线，提高可读性。</p> <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=n>_000_000</span><span class=p>;</span>
<span class=k>UPDATE</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=n>x_FFFF_FFFF</span><span class=w> </span><span class=p>...</span>
</code></pre></div> <h2 id=json>JSON 新功能<a class=headerlink href=#json title="Permanent link">&para;</a></h2> <h3 id=json-t801>JSON 数据类型（T801）<a class=headerlink href=#json-t801 title="Permanent link">&para;</a></h3> <p>新标准增加了 <code>JSON</code> 数据类型。许多数据库产品实际上已经提供了这个类型。</p> <p><code>SQL:2016</code> 只是支持了 <code>JSON</code> 数据的操作，数据仍然使用字符串存储。新的功能同时还增加了一些 <code>JSON</code> 相关的函数，例如 <code>JSON_SERIALIZE</code>、<code>JSON_SCALAR</code> 以及 <code>IS JSON</code>。</p> <h3 id=json-t802>增强的 JSON 数据类型（T802）<a class=headerlink href=#json-t802 title="Permanent link">&para;</a></h3> <p>这个功能可以为 <code>JSON</code> 类型指定额外的选项。具体来说，可以指定一个唯一键检测，例如 <code>JSON('...text...' WITH UNIQUE KEYS)</code>。</p> <h3 id=jsont803>基于字符串的 JSON（T803）<a class=headerlink href=#jsont803 title="Permanent link">&para;</a></h3> <p>这个功能代表了 <code>SQL:2016</code> 中的字符串 <code>JSON</code>。数据库提供的 <code>JSON</code> 函数（例如 <code>JSON_OBJECT</code>、<code>JSON_OBJECTAGG</code>、<code>JSON_TABLE</code> 等）可以选择支持字符串格式的 <code>JSON</code> 数据还是原生的 <code>JSON</code> 数据类型，也可以支持两者。</p> <h3 id=sqljson-t840>SQL/JSON 路径中的十六进制整数常量（T840）<a class=headerlink href=#sqljson-t840 title="Permanent link">&para;</a></h3> <p>这个功能允许在 <code>SQL/JSON</code> 路径语言中使用十六进制整数常量。</p> <p>虽然不属于这个功能，但是 <code>SQL</code> 标准现在允许以扩展插件的形式支持 <code>JavaScript（ECMAScript）</code>，因此不需要每次 <code>ECMAScript</code> 更新时更新 <code>SQL</code> 标准。所以 <code>SQL/JSON</code> 路径现在也可以支持最新 <code>ECMAScript</code> 中的其他数字常量，例如二进制整数和下划线分隔符。</p> <h3 id=sqljson-t860-t864>SQL/JSON 简化访问符（T860-T864）<a class=headerlink href=#sqljson-t860-t864 title="Permanent link">&para;</a></h3> <p>"简化访问符"功能允许使用点号和数组语法访问 <code>JSON</code> 数据中的复合类型和数组类型。例如，假设字段 j 是一个 <code>JSON</code> 类型，包含以下数据：</p> <div class=highlight><pre><span></span><code><span class=p>{</span><span class=nt>&quot;foo&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;bar&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=mi>200</span><span class=p>,</span><span class=w> </span><span class=mi>300</span><span class=p>]},</span><span class=w> </span><span class=err>...</span><span class=p>}</span>
</code></pre></div> <p>我们可以使用简化访问符获取字段中的信息：</p> <div class=highlight><pre><span></span><code><span class=k>SELECT</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>j</span><span class=p>.</span><span class=n>foo</span><span class=p>.</span><span class=n>bar</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span><span class=w> </span><span class=p>...</span><span class=w> </span>
<span class=k>FROM</span><span class=w> </span><span class=n>tbl</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=p>...</span>
</code></pre></div> <h3 id=sqljson-t865-t878>SQL/JSON 元素方法（T865-T878）<a class=headerlink href=#sqljson-t865-t878 title="Permanent link">&para;</a></h3> <p><code>SQL/JSON</code> 元素方法或者函数可以在 <code>SQL/JSON</code> 路径表达式中使用，对元素值进行处理。<code>SQL:2016</code> 已经定义了一些这类方法，例如 abs()、floor()、size()。新增的方法主要用于数据类型转换：</p> <ul> <li>T865: SQL/JSON item method: bigint()</li> <li>T866: SQL/JSON item method: boolean()</li> <li>T867: SQL/JSON item method: date()</li> <li>T868: SQL/JSON item method: decimal()</li> <li>T869: SQL/JSON item method: decimal() with precision and scale</li> <li>T870: SQL/JSON item method: integer()</li> <li>T871: SQL/JSON item method: number()</li> <li>T872: SQL/JSON item method: string()</li> <li>T873: SQL/JSON item method: time()</li> <li>T874: SQL/JSON item method: time_tz()</li> <li>T875: SQL/JSON item method: time precision</li> <li>T876: SQL/JSON item method: timestamp()</li> <li>T877: SQL/JSON item method: timestamp_tz()</li> <li>T878: SQL/JSON item method: timestamp precision</li> </ul> <h3 id=json-t879-t882>JSON 数据比较功能（T879-T882）<a class=headerlink href=#json-t879-t882 title="Permanent link">&para;</a></h3> <p>这个功能允许针对 <code>JSON</code> 数据类型的比较、排序以及分组操作。</p> <h2 id=_2>属性图查询语言<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>这是 <code>SQL</code> 标准中增加的一个全新部分：<code>Property Graph Queries (SQL/PGQ)</code>。这个新功能支持使用图数据库的方式查询表中的数据。</p> <p>完整的属性图查询语言比较复杂，以下是一个简单的示例：</p> <div class=highlight><pre><span></span><code><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(...);</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>company</span><span class=w> </span><span class=p>(...);</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>ownerof</span><span class=w> </span><span class=p>(...);</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>transaction</span><span class=w> </span><span class=p>(...);</span>
<span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>account</span><span class=w> </span><span class=p>(...);</span>

<span class=k>CREATE</span><span class=w> </span><span class=n>PROPERTY</span><span class=w> </span><span class=n>GRAPH</span><span class=w> </span><span class=n>financial_transactions</span>
<span class=w>    </span><span class=n>VERTEX</span><span class=w> </span><span class=n>TABLES</span><span class=w> </span><span class=p>(</span><span class=n>person</span><span class=p>,</span><span class=w> </span><span class=n>company</span><span class=p>,</span><span class=w> </span><span class=n>account</span><span class=p>)</span>
<span class=w>    </span><span class=n>EDGE</span><span class=w> </span><span class=n>TABLES</span><span class=w> </span><span class=p>(</span><span class=n>ownerof</span><span class=p>,</span><span class=w> </span><span class=k>transaction</span><span class=p>);</span>

<span class=k>SELECT</span><span class=w> </span><span class=n>owner_name</span><span class=p>,</span>
<span class=w>       </span><span class=k>SUM</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>total_transacted</span>
<span class=k>FROM</span><span class=w> </span><span class=n>financial_transactions</span><span class=w> </span><span class=n>GRAPH_TABLE</span><span class=w> </span><span class=p>(</span>
<span class=w>  </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Alice&#39;</span><span class=p>)</span>
<span class=w>        </span><span class=o>-</span><span class=p>[:</span><span class=n>ownerof</span><span class=p>]</span><span class=o>-&gt;</span><span class=w> </span><span class=p>(:</span><span class=n>account</span><span class=p>)</span>
<span class=w>        </span><span class=o>-</span><span class=p>[</span><span class=n>t</span><span class=p>:</span><span class=k>transaction</span><span class=p>]</span><span class=o>-</span><span class=w> </span><span class=p>(:</span><span class=n>account</span><span class=p>)</span>
<span class=w>        </span><span class=o>&lt;-</span><span class=p>[:</span><span class=n>ownerof</span><span class=p>]</span><span class=o>-</span><span class=w> </span><span class=p>(</span><span class=k>owner</span><span class=p>:</span><span class=n>person</span><span class=o>|</span><span class=n>company</span><span class=p>)</span>
<span class=w>  </span><span class=n>COLUMNS</span><span class=w> </span><span class=p>(</span><span class=k>owner</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>owner_name</span><span class=p>,</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>amount</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>amount</span><span class=p>)</span>
<span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>ft</span>
<span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>owner_name</span><span class=p>;</span>
</code></pre></div> <p>以上示例中，表之间还需要定义外键，这样属性图定义才能确定它们之间的联系；或者也可以在属性图定义时指定表之间的联系。</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime" title="2025年12月24日 05:56:46 UTC">2025-12-24 05:56:46</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到页面顶部 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyleft &copy; 2020 - 2023 fengzhao </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.1e8ae164.min.js></script> </body> </html>