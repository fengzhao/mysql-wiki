
# 数据库设计

## 概述

数据库设计属于系统设计的范畴，通常把使用数据库的系统称为数据库应用系统，把对数据库应用系统的设计成为数据库设计。

按照软件工程对系统生命周期的定义，软件生命周期分为6个阶段：

- 制定计划

- 需求分析

- 系统设计

- 程序编制

- 测试以及运行维护


在数据库设计中，也参照这种划分，划分数据库应用系统的生命周期：

- 数据库规划

- 需求描述与分析

- 数据库与应用程序设计

- 数据库设计与实现

- 测试

- 运行维护



## 数据库设计

**数据库设计是指对于一个给定的应用环境，构造（设计）优化的数据库逻辑模式和物理结构，并据此建立数据库及其应用系统，使之能够有效地存储和管理数据，满足各种用户的应用需求，包括信息管理要求和数据操作要求**。

**数据库设计的目标** ：是为用户和各种应用系统提供一个信息基础设施和高效率的运行环境 。

**数据库设计的基本任务** ：是根据用户的信息需求、处理需求和数据库的支持环境(包括硬件、操作系统和DBMS)，设计出数据库模式(包括外模式、逻辑模式和内模式)及其典型的应用程序。





- 用户需求分析

    - 产出：需求说明文档，数据字典和数据流图

- 概念结构设计

- 逻辑结构设计

- 物理结构设计

- 数据库实施阶段

- 数据库运行和维护阶段





#### ER图

实体关系图也被称为 ERD、ER 图、实体联系模型、实体联系模式图或 ER 模型，是一种用于数据库设计的结构图。

一幅 ERD 包含不同的符号和连接符，用于显示两个重要的信息： **系统范围内的主要实体，以及这些实体之间的相互关系**

==**E-R图叫实体联系图，用图形化表示数据库的全局逻辑结构。**==

- 在 ER 模型中，实体显示为 **圆角矩形** ，其名称位于上方，其属性列在实体形状的主体中。

- **分成两部分的矩形** 代表实体集， **阴影部分** 是实体集名字，第二部分包括实体集属性，主码属性带下划线。

- **菱形** 代表联系集。

- **未分割的矩形** 代表联系集的属性。

- 联系集与其属性以 **虚线** 连接。

- **线段** 将实体集与联系集连接。


详细可以参考[visual-paradigm](https://www.visual-paradigm.com/cn/guide/data-modeling/what-is-entity-relationship-diagram/)


#### 数据流图



从原理上讲，只要纸足够大，一个软件系统的分析模型就可以画在一张纸上。然而，一个复杂的软件系统可能涉及上百个加工和上百个数据流，甚至更多。

如果将它们画在一张图上，则会十分复杂，不易阅读，也不易理解。因此，根据自顶向下逐层分解的思想，可以将数据流图按照层次结构来绘制。

DFD 中使用级别或层来表示有关系统或过程的渐进式详细程度。这些级别包括：

级别 0：也称为"上下文图"，这是最高级别，它仅包含一个流程节点（"流程0"），它概括了与外部实体相关的整个系统的功能。

- 所有外部实体以及进出它们的主要数据流都显示在上下文图上。
- 该图不包含任何数据存储。
- 上下文图中的进程名称应该是信息系统的名称。例如，评分系统、订单处理系统、注册系统。

级别1：仍然是系统的相对宽泛的视图，但包含子流程和更多细节。

级别2：提供更多细节，并根据需要继续分解子流程。

级别3：虽然这种详细程度并不常见，但复杂系统可以从该级别的表示中受益。





==**数据流图 (DFD) 用于表示业务信息系统中的数据流，它表达了系统中的据传从输入到存储间所涉及的程序。**==


数据流图可以分为 **逻辑形** 和 **物理形** 。

- 逻辑数据流图描述了用以完成某业务功能所涉及的、业务层面的数据流动

- 物理数据流图描述系统层面的数据流动。


数据流图中的各种规则：

- 程序： 程序表示对数据的处理过程，它可以接收输入，并产生输出，每个程序都有一个名称来标识它所执行的功能，比如：申请付款，计算佣金等。用 **圆角矩形** 表示。

- 数据存储: 表示暂时存储的数据 , 数据存储的粒度是以表为单位。用 **半框矩形** 表示。

    - 数据存储必须以数据流连接到程序。

    - 每个数据存储必须至少有一个输入数据流和至少一个输出数据流（即使输出数据流是一个确认讯息）。

    - 方向：流向文件的数据流 表示 向文件内写入内容 , 从文件流出的数据流 表示 从文件读取内容 ;



- 外部实体(实体)： 软件系统之外的人员/组织，实体用 **直角矩形** 表示。


- 数据流： 数据流是数据从信息系统的一个部分移动到另一个部分的路径。

    - 带输入箭头的直线即为 **输入数据流**

    - 带输入箭头的直线即为 **输入数据流**

    - 由于每个程序都将数据从一种形态转换为另一种形态，故每个程序必须至少有一个输入数据流和一个输出数据流。

    - 数据流图的一大原则是数据不能自行转换成另一形态，数据必须经由某程序的处理才可被分发至系统的某个部份。通过这条规则，我们可以非常容易地识别出错误画法。





